# Claude Code Writer MCP (Agent-in-Agent)

Purpose
- Call Claude Code (Pro subscription) programmatically from the GLM vault via an MCP server that spawns the Claude CLI and returns generated text.

Why this MCP
- The official `claude mcp serve` exposes file/command tools only (no LLM text generation).
- The community server `steipete/claude-code-mcp` exposes a `claude_code` tool that runs the Claude CLI and returns output – ideal for automated Romanian writing via your Pro plan.

Prereqs
- Claude CLI installed and logged in
- Pro plan active
- Node.js + npm available

Install server (once)
- Location: `/home/alin/claude-code-mcp`
- Commands:
```
cd /home/alin
git clone https://github.com/steipete/claude-code-mcp.git
cd claude-code-mcp
npm install
npm run build
```

Project MCP config (`.mcp.json`)
```
{
  "mcpServers": {
    "claude-code-writer": {
      "command": "node",
      "args": ["/home/alin/claude-code-mcp/dist/server.js"],
      "env": {
        "CLAUDE_CLI_PATH": "/home/alin/.local/bin/claude",
        "CLAUDE_WORK_DIR": "/home/alin/claude-pro-writer"
      },
      "description": "Claude Code agent-in-agent for Pro Romanian writing"
    }
  }
}
```

Grant permissions (one-time)
```
cd /home/alin/claude-pro-writer
unset ANTHROPIC_API_KEY ANTHROPIC_BASE_URL ANTHROPIC_AUTH_TOKEN
claude --dangerously-skip-permissions
```
Accept prompts, then `exit`.

Smoke test (inside GLM session)
- Start: `claude` in this vault → `/mcp`
- Run tool:
```
Use @claude-code-writer with:
{
  "prompt": "Scrie 2 paragrafe în română despre semnificația viselor cu apă. Include diacritice. 120–150 de cuvinte.",
  "workFolder": "/home/alin/claude-pro-writer"
}
```
Expect real Romanian output with diacritics (generated by Claude Pro).

Operational guardrails
- Use this MCP only for Romanian content generation (Pro tokens are scarce).
- Enforce: no CJK chars, keep headings, short paragraphs, add 25–35 word excerpt.
- Keep GLM for bulk tasks (images, monetization, blocks, publishing).

References
- Official Claude Code MCP (no text gen): docs.claude.com/claude-code/mcp
- Community server (text gen): github.com/steipete/claude-code-mcp
