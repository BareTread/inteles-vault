# üöÄ Quick Start: Agent-in-Agent Workflow

**TL;DR:** GLM orchestrates everything. Claude Pro only writes Romanian content via MCP tool call.

---

## 1Ô∏è‚É£ One-Time Setup (5 minutes)

```bash
# Run the setup script
cd /home/alin/DATA/OBSIDIAN/inteles-vault
chmod +x setup-agent-in-agent.sh
./setup-agent-in-agent.sh
```

**What it does:**
- Clones & builds `steipete/claude-code-mcp`
- Accepts Claude Code permissions
- Verifies configuration

---

## 2Ô∏è‚É£ Start Workflow Session

```bash
cd /home/alin/DATA/OBSIDIAN/inteles-vault
claude
```

**Verify MCP:**
```
/mcp
```

Should show:
- ‚úÖ `claude-code-writer` - Connected
- ‚úÖ `inteles-wordpress` - Connected
- ‚úÖ `pexels-mcp-server` - Connected
- ‚úÖ `perplexity-ask` - Connected

---

## 3Ô∏è‚É£ Write Your First Article

### Quick Test (30 seconds)

```
Use @claude-code-writer to execute:

{
  "prompt": "Cite»ôte /home/alin/claude-pro-writer/romanian-style.md. Apoi scrie 2 paragrafe √Æn rom√¢nƒÉ despre semnifica»õia viselor cu apƒÉ. Include diacritice. Ton empatic. 150 cuvinte.",
  "workFolder": "/home/alin/claude-pro-writer"
}
```

**Expected:** Real Romanian text with perfect diacritics, generated by Claude Pro.

### Full Article Workflow

```
Task: Write article about "Ce √ÆnseamnƒÉ c√¢nd visezi »ôerpi"

Step 1: Research
@perplexity-ask Search: "snake dreams Jung Freud symbolism psychology Romanian culture"

Step 2: Write Content (Claude Pro via MCP)
Use @claude-code-writer:

{
  "prompt": "Cite»ôte context din /home/alin/claude-pro-writer/romanian-style.md »ôi avoid.md.

Scrie un articol de 1000 cuvinte √Æn rom√¢nƒÉ: 'Ce √ÆnseamnƒÉ c√¢nd visezi »ôerpi - Interpretare psihologicƒÉ'

StructurƒÉ:
1. Introducere (quick answer √Æn primele 2-3 paragrafe)
2. PerspectivƒÉ psihologicƒÉ (Jung: transformare, vindecarea)
3. Scenarii comune (»ôarpe negru, verde, care mu»ôcƒÉ)
4. Context rom√¢nesc (tradi»õii, simboluri culturale)
5. Resurse pentru aprofundare (2-3 cƒÉr»õi)
6. FAQ (6+ √ÆntrebƒÉri cu rƒÉspunsuri)
7. Concluzie (ac»õiuni practice)

Reguli stricte:
- Diacritice: ƒÉ, √Æ, √¢, »ô, »õ (mandatory)
- Paragrafe scurte (2-3 propozi»õii)
- H2/H3 la fiecare 300-400 cuvinte
- Ton: empatic, profesional, folose»ôte 'tu'
- Quick answer √Æn primele 2-3 paragrafe
- FƒÉrƒÉ AI tells: '√én concluzie...', 'delve', 'utilize'
- FƒÉrƒÉ em-dashes excesive

Keywords: vise, »ôerpi, interpretare, Jung, Freud, psihologie, transformare

La final adaugƒÉ:
---
Excerpt: [25-35 cuvinte sumar]
Keywords: [listƒÉ keywords]",
  "workFolder": "/home/alin/claude-pro-writer"
}

Step 3 & 4: Parallel Processing
[In same prompt, run both:]

A) Get Products:
Find 2-3 relevant products from 04-Monetization/MASTER-PRODUCTS-LIST.md
- Psychology books (Jung, Freud, dream dictionaries)
- Sleep supplements if relevant
- Max 3 products, verify URLs live

B) Get Images:
Search Pexels for "snake", "psychology", "dream symbolism"
- Need: 1 hero (1200x675) + 2 inline (1200x800)
- Generate Romanian alt text
- Format: WebP, photographer credit

Step 5: Assemble Kadence Blocks
Convert markdown + products + images ‚Üí WordPress HTML blocks
- Add affiliate box with disclosure
- Add FAQ schema markup
- Mobile-optimized

Step 6: Publish
Upload to WordPress via @inteles-wordpress MCP
- Category: √én»õelesul Viselor (ID 5)
- Status: publish
- Set featured image
```

---

## 4Ô∏è‚É£ Token & Cost Tracking

| Component | Model | Est. Tokens | Cost |
|-----------|-------|-------------|------|
| Research | Perplexity | 3K | $0.01 |
| **Writer** | **Claude Pro (MCP)** | **8K** | **$0 (Pro)** |
| Monetization | GLM | 2K | $0.006 |
| Images | GLM | 3K | $0.009 |
| Blocks | GLM | 4K | $0.012 |
| Publisher | GLM | 2K | $0.006 |
| **Total** | | **22K** | **~$0.04** |

**Capacity:** 10-15 articles/day within Pro limits

---

## 5Ô∏è‚É£ Common Issues

### "MCP server not connected"

```bash
# Check if server is running
cd /home/alin/claude-code-mcp
node build/index.js
# Should output: "Claude Code MCP Server running..."
```

**Fix:** Restart GLM session

### "Text looks fake (generated by echo)"

You're using the WRONG MCP server.

**Check `.mcp.json`:**
- ‚ùå BAD: `"command": "claude", "args": ["mcp", "serve"]`
- ‚úÖ GOOD: `"command": "node", "args": ["/home/alin/claude-code-mcp/build/index.js"]`

### "Claude CLI not found"

```bash
# Verify path
which claude
# Should output: /home/alin/.local/bin/claude
```

**Fix:** Update `CLAUDE_CLI_PATH` in `.mcp.json`

### "Permissions not accepted"

```bash
cd /home/alin/claude-pro-writer
unset ANTHROPIC_API_KEY ANTHROPIC_BASE_URL ANTHROPIC_AUTH_TOKEN
claude --dangerously-skip-permissions
# Type 'yes' when prompted, then 'exit'
```

---

## 6Ô∏è‚É£ Quality Checklist

After each article, verify:

- ‚úÖ **Romanian quality:** All diacritics present (ƒÉ, √Æ, √¢, »ô, »õ)
- ‚úÖ **Structure:** H2/H3 every 300-400 words
- ‚úÖ **Paragraphs:** 2-3 sentences max
- ‚úÖ **Quick answer:** First 2-3 paragraphs
- ‚úÖ **No AI tells:** No "√én concluzie...", "delve", etc
- ‚úÖ **Products:** 2-3 max, verified URLs, disclosure present
- ‚úÖ **Images:** Romanian alt text, photographer credit
- ‚úÖ **FAQ:** 6+ questions with schema markup
- ‚úÖ **Length:** 900-1200 words
- ‚úÖ **Mobile:** Easy scanning, clean spacing

**Score target:** 8/10 on all categories

---

## 7Ô∏è‚É£ Pro Tips

### Batch Processing

Process 3-5 articles in one session:
1. Research all topics ‚Üí save briefs
2. Write all articles (call @claude-code-writer 5x)
3. Process all monetization/images in parallel
4. Assemble all blocks
5. Publish batch

**Time:** ~60-75 minutes for 5 articles

### Context Management

Keep GLM context clean:
- Use compact JSON outputs
- Don't paste full articles back to GLM
- Clear between batches if needed: `/reset`

### Cost Optimization

**Expensive:**
- ‚ùå Perplexity for simple queries (use local knowledge)
- ‚ùå Re-writing articles (iterate prompts before calling MCP)
- ‚ùå Multiple Claude Pro calls per article

**Cheap:**
- ‚úÖ GLM for all coordination
- ‚úÖ One Claude Pro call per article
- ‚úÖ Reuse product/image lists across similar articles

---

## 8Ô∏è‚É£ Next Steps

1. **Test the setup:**
   - Run quick test (Step 3 above)
   - Verify Romanian text quality

2. **Write first full article:**
   - Pick a simple topic
   - Follow full workflow
   - Time yourself

3. **Create agents** (optional, for automation):
   - Use prompts from `00-AGENT-CONTEXT/AGENT-CREATION-PROMPTS.md`
   - Agents can call `@claude-code-writer` tool
   - One-command article generation

4. **Scale production:**
   - Aim for 3-5 articles/day initially
   - Optimize workflow based on bottlenecks
   - Track costs and quality metrics

---

## üìö Full Documentation

- **Complete guide:** `SOLUTION-AGENT-IN-AGENT.md`
- **Setup script:** `setup-agent-in-agent.sh`
- **Agent prompts:** `00-AGENT-CONTEXT/AGENT-CREATION-PROMPTS.md`
- **Workflow details:** `HYBRID-WORKFLOW-SETUP.md`

---

**Ready to build?** Run the setup script and start your first article! üöÄ
